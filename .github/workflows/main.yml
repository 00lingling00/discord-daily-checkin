name: Discord Daily Reminder

on:
  schedule:
    - cron: '0 1 * * *'  # æ¯å¤© 10:00 JSTï¼ˆUTC+9ï¼‰
    - cron: '0 10 * * *'  # æ¯å¤© 18:00 JSTï¼ˆUTC+9ï¼‰
  workflow_dispatch:

jobs:
  send_reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Set message content
        run: |
          echo "DISCORD_MESSAGE=$(if [ ${{ github.event.schedule }} = '0 1 * * *' ]; then
            echo '**ðŸ•˜ å‡ºç¤¾æ‰“å¡æé†’ï¼š**\nè¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š\n\nå‡ºç¤¾\nðŸ§  ä»Šæ—¥è®¡åˆ’ï¼š\nðŸ•˜ æ—¶é—´ï¼šï¼ˆå¯ç©ºï¼‰\nðŸ“ å¤‡æ³¨ï¼š';
          else
            echo '**ðŸ•” é€€ç¤¾æ‰“å¡æé†’ï¼š**\nè¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š\n\né€€ç¤¾\nâœ… ä»Šæ—¥æ€»ç»“ï¼š\nðŸ•” æ—¶é—´ï¼šï¼ˆå¯ç©ºï¼‰\nðŸ•’ å·¥æ—¶ï¼šï¼ˆå¯ç©ºï¼‰\nðŸ“ å¤‡æ³¨ï¼š';
          fi)" >> $GITHUB_ENV

      - name: Send reminder to Discord
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d "{\"content\": \"$DISCORD_MESSAGE\"}" ${{ secrets.DISCORD_WEBHOOK }}
