name: Discord Daily Reminder

on:
  schedule:
    - cron: '55 6 * * *'  # 出社提醒 - 15:55 JST
    - cron: '57 6 * * *'  # 退社提醒 - 15:57 JST
  workflow_dispatch:

jobs:
  send_reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Set message content
        run: |
          echo "DISCORD_MESSAGE=$(if [ ${{ github.event.schedule }} = '0 1 * * *' ]; then
            echo '**🕘 出社打卡提醒：**\n请使用以下格式：\n\n出社\n🧠 今日计划：\n🕘 时间：（可空）\n📝 备注：';
          else
            echo '**🕔 退社打卡提醒：**\n请使用以下格式：\n\n退社\n✅ 今日总结：\n🕔 时间：（可空）\n🕒 工时：（可空）\n📝 备注：';
          fi)" >> $GITHUB_ENV

      - name: Send reminder to Discord
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d "{\"content\": \"$DISCORD_MESSAGE\"}" ${{ secrets.DISCORD_WEBHOOK }}
