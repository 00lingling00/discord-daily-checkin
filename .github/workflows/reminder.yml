name: Discord Daily Reminder Test

on:
  schedule:
    - cron: '30 0 * * *'  # å‡ºç¤¾æé†’ - 10:00 JST æå‰åŠå°æ—¶é˜²æ­¢å»¶è¿Ÿ
    - cron: '30 11 * * *'  # é€€ç¤¾æé†’ - 20:00 JST
  workflow_dispatch:

jobs:
  send_reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Log UTC time for debugging
        run: |
          echo "â° GitHub Actions triggered at: $(date -u) UTC"

      - name: Determine message content
        run: |
          current_hour=$(date -u +"%H")
          if [ "$current_hour" = "0" ]; then
            echo "DISCORD_MESSAGE=**ðŸ•˜ å‡ºç¤¾æ‰“å¡æé†’ï¼š**\n\nå‡ºç¤¾\nðŸ§  ä»Šæ—¥è®¡åˆ’ï¼š\nðŸ•˜ æ—¶é—´ï¼š :\nðŸ“ å¤‡æ³¨ï¼š" >> $GITHUB_ENV
          else
            echo "DISCORD_MESSAGE=**ðŸ•” é€€ç¤¾æ‰“å¡æé†’ï¼š**\n\né€€ç¤¾\nâœ… ä»Šæ—¥æ€»ç»“ï¼š\nðŸ•” æ—¶é—´ï¼š :\nðŸ•’ å·¥æ—¶ï¼šh\nðŸ“ å¤‡æ³¨ï¼š" >> $GITHUB_ENV
          fi

      - name: Send reminder to Discord
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d "{\"content\": \"$DISCORD_MESSAGE\"}" ${{ secrets.DISCORD_WEBHOOK }}
